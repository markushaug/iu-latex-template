% Template created by Markus Haug <mh@haugmarkus.com>
% Credits: Markus Haug and the template contributors.
% Feel free to share and modify this template, but please give credit where it's due.

\documentclass[11pt, a4paper, oneside, english]{article}


%%
%% Packages & Formatting
%%
\usepackage[english]{babel} % English language settings
\usepackage[hidelinks]{hyperref} % Hyperlinks without borders
\usepackage{setspace} % Spacing between paragraphs
\usepackage[left=2cm, right=2cm, top=2cm, bottom=2cm]{geometry} % Page margins
\setstretch{1.5} % 1.5 line spacing
\usepackage{lipsum}  % Dummy text
\usepackage{titlesec} % define size for section headings
\usepackage[nohyperlinks, printonlyused]{acronym} % Acronyms
\usepackage[utf8]{inputenc} % Correct display of special characters
\usepackage[T1]{fontenc} % enable hyphenation for languages with accented characters

%% Fonts and Sizes
\usepackage{fontspec}
\setmainfont{Arial} % Main font Arial (requires lualatex or xelatex)
\titleformat{\section}{\normalfont\fontsize{12pt}{1.5}\bfseries}{\thesection}{1em}{} % Section headings 1pt larger
\titleformat{\subsection}{\normalfont\fontsize{12pt}{1.5}\bfseries}{\thesubsection}{1em}{} % Subsection headings 1pt larger
\titleformat{\subsubsection}{\normalfont\fontsize{12pt}{1.5}\bfseries}{\thesubsubsection}{1em}{} % Subsubsection headings 1pt larger
\def\UrlFont{\rm} % Print URLs not in Typewriter Font
\renewcommand{\footnotesize}{\fontsize{10pt}{1.5pt}\selectfont}

% Prevent automatic paragraph indentation
\usepackage{changepage}
\setlength{\parindent}{0pt}
% 6pt spacing only between paragraphs
\setlength{\parskip}{6pt}{}

% Blank page without page number, next page right
\newcommand{\blankpage}{
 \clearpage{\pagestyle{empty}\cleardoublepage}
}

% Include graphics
\usepackage{graphicx}
% center images and tables
\makeatletter
\g@addto@macro\@floatboxreset\centering
\makeatother


%% PDF Metadata
% TODO: Update this!
\hypersetup{
 pdfauthor={Your Name},
 pdftitle={My Title}, %% Title of the PDF file
  pdfsubject={Case Study - IU LaTeX Template},
 pdfkeywords={},
 pdfcreator={lualatex},
 pdfproducer={lualatex - Template by Markus Haug},
}

%%
%% Bibliography & Settings
%%
\usepackage[babel]{csquotes}
\usepackage[backend=biber, style=apa, pagetracker, apamaxprtauth=20 ]{biblatex}

%%
%% Source Code Setup
%%
\usepackage{listings}
\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Java,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}


% TODO Remove Comma after second to last author and ampersand
% https://tex.stackexchange.com/questions/670888/biblatex-apa-7-modification
\makeatletter
\renewcommand*{\apablx@ifrevnameappcomma}{\@secondoftwo}
\makeatother

\DefineBibliographyExtras{ngerman}{%
  \renewcommand*{\finalandcomma}{}%
}


%% Include Bibliography
\addbibresource{references.bib} % your bib file


%% ++++++++++++++++++++++++++++++++++++++++++
%% Document
%% ++++++++++++++++++++++++++++++++++++++++++
\begin{document}

\pagenumbering{Roman} % Uppercase Roman numerals
% \pagenumbering{gobble} % switch off page numbering
\include{pages/cover} % Cover page

\newpage
%% ++++++++++++++++++++++++++++++++++++++++++
%% Tables of Contents
%% ++++++++++++++++++++++++++++++++++++++++++
\stepcounter{page}
\setcounter{tocdepth}{3}
\tableofcontents % Table of contents

\blankpage
\phantomsection
\addcontentsline{toc}{section}{List of Figures}
\listoffigures % List of Figures



% TODO: Check if needed
%\blankpage
%\listoftables % List of Tables
%\addcontentsline{toc}{section}{List of Tables}

\blankpage
\section*{Acronyms}
\addcontentsline{toc}{section}{Acronyms}

% TODO: Check acronyms!
\begin{acronym}

\acro{iu}[IU]{IU International University}
\end{acronym}
%\label{last-roman-page}% Save last page of this chapter

%% ++++++++++++++++++++++++++++++++++++++++++
%% Main Part
%% ++++++++++++++++++++++++++++++++++++++++++
\blankpage
\pagenumbering{arabic}
\input{chapters/introduction} % Introduction
\input{chapters/mainpart}  % Main Part
\input{chapters/conclusion}  % Conclusion
\pagebreak
%% ++++++++++++++++++++++++++++++++++++++++++
% References
%% ++++++++++++++++++++++++++++++++++++++++++
\blankpage

\phantomsection
% set bibliography name
\renewcommand{\bibname}{References}
\addcontentsline{toc}{section}{\bibname}
% \nocite{*} % only include if also citing sources not referenced in the text

\begin{flushleft}

\printbibliography[title=\bibname]
\end{flushleft}

% %% ++++++++++++++++++++++++++++++++++++++++++
% %% Appendix
% %% ++++++++++++++++++++++++++++++++++++++++++
% \blankpage
% \appendix
% \include{pages/appendix} % Appendix % TODO: Add Appendix?

\end{document}

